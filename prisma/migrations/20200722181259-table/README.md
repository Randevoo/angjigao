# Migration `20200722181259-table`

This migration has been generated by winsonhys at 7/22/2020, 6:12:59 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Cart" DROP CONSTRAINT "Cart_ownerId_fkey"

CREATE TABLE "public"."UserTable" (
"id" text  NOT NULL ,
"email" text  NOT NULL ,
"username" text  NOT NULL ,
"password" text  NOT NULL ,
"dob" timestamp(3)  NOT NULL ,
PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "UserTable.email" ON "public"."UserTable"("email")

CREATE UNIQUE INDEX "UserTable.username" ON "public"."UserTable"("username")

ALTER TABLE "public"."Cart" ADD FOREIGN KEY ("ownerId")REFERENCES "public"."UserTable"("id") ON DELETE CASCADE ON UPDATE CASCADE

DROP TABLE "public"."User";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200722163155-optional..20200722181259-table
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider             = "prisma-client-js"
@@ -21,9 +21,10 @@
   email    String   @unique
   username String   @unique
   password String
   dob      DateTime
-  cart     Cart?
+  cart     Cart
+  @@map("UserTable")
 }
 model Shop {
   id        String     @default(uuid()) @id
@@ -39,9 +40,9 @@
   name           String
   description    String
   price          Float
   imageUrl       String
-  Shop           Shop            @relation(fields: [shopId], references: [id])
+  shop           Shop            @relation(fields: [shopId], references: [id])
   shopId         String
   cartItemCounts CartItemCount[]
 }
```


